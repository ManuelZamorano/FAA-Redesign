<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Map Search</title>
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <!-- Custom CSS -->
  <style>
    /* Adjustments for better visual */
    body {
      background-color: #f8f9fa;
      padding-top: 20px;
    }
    .map-container {
      height: 500px;
    }
  </style>
</head>
<body>

<div class="container">
  <div class="row">
    <div class="col-md-6">
      <h2>Map Search</h2>
      <div class="input-group mb-3">
        <input type="text" class="form-control" placeholder="Search for a location" id="searchInput">
        <div class="input-group-append">
          <button class="btn btn-primary" type="button" id="searchButton">Search</button>
        </div>
        <div class="row g-5">
            <div class="col-md-7 col-lg-8">
              <form class="needs-validation" novalidate>
                <div class="row g-4">
                  <div class="col-md-4">
                    <label for="Advisories" class="form-label">Country</label>
                    <select class="form-select" id="advisories">                   
                            <option>ATCSCC Advisories</option>
                            <option>Canadian Advisories</option>
                            <option>Both</option>
                        </select>
                    <div class="invalid-feedback">
                      Please select a valid country.
                    </div>
                  </div>
      
                  <div class="col-md-4">
                    <label for="multiselect" class="form-label">Choose Advisories</label>
                    <select class="form-select" id="multiselect" multiple>
                      <option value="">Choose...</option>
                    <option>CTOP Programs</option>
                    <option>Ground Stops</option>
                    <option >Ground Delay Programs</option>
                    <option >Route advisories</option>
                    <option >Other kinds of advisories</option>
                    <option >Airspace Flow Program</option>
                </select>
               
                
                  </div>
                  <div class="col-md-4">
                    <div class="md-form md-outline input-with-post-icon datepicker" id="formatsSection">
                        <input placeholder="Select date" type="text" id="datepicker" class="form-control">
                        <i class="bi bi-calendar-date"></i>
                      </div>
                  </div>
      
                </div>
              </form>
            </div>
          </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="map-container" id="map"></div>
    </div>
  </div>
  <div class="row mt-3">
    <div class="col-md-6">
      <h4>Search Results</h4>
      <ul id="searchResults" class="list-group">
        <!-- Results will be populated here -->
      </ul>
    </div>
  </div>
</div>

<!-- Mapbox GL JS -->
<script src="https://api.mapbox.com/mapbox-gl-js/v2.6.1/mapbox-gl.js"></script>
<!-- Bootstrap JS (optional) -->
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<!-- Custom JavaScript -->
<script>
  mapboxgl.accessToken = 'pk.eyJ1IjoibWFubm96YW0iLCJhIjoiY2x1MGZhZjZnMDFtcjJrc2EzdGoxYzMzbyJ9.DDc0Bmy153c2v1TXqXTdkw'; // Replace with your Mapbox Access Token

  // Initialize the map
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [-74.5, 40], // Default center coordinates
    zoom: 9 // Default zoom level
  });

  // Search button click event handler
  document.getElementById('searchButton').addEventListener('click', function() {
    var query = document.getElementById('searchInput').value.trim();

    // Perform search using Mapbox Geocoding API
    fetch('https://api.mapbox.com/geocoding/v5/mapbox.places/' + encodeURIComponent(query) + '.json?access_token=' + mapboxgl.accessToken)
      .then(response => response.json())
      .then(data => {
        // Clear previous search results
        document.getElementById('searchResults').innerHTML = '';

        // Display search results
        data.features.forEach(feature => {
          var listItem = document.createElement('li');
          listItem.classList.add('list-group-item');
          listItem.textContent = feature.place_name;
          document.getElementById('searchResults').appendChild(listItem);

          // Add click event listener to each result
          listItem.addEventListener('click', function() {
            // Center the map on the selected location
            map.flyTo({
              center: feature.center,
              zoom: 12 // Adjust zoom level as needed
            });
          });
        });
      })
      .catch(error => {
        console.error('Error:', error);
      });
  });
</script>

</body>
</html>
